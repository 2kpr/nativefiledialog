# 
# Native File Dialog
#
# Scons build script -- GCC, Clang, Visual Studio
# Does not build test


# target arch is build arch -- extend here for cross compiling
target_arch=str(Platform())
debug=1

nfd_files = ['nfd_common.c']

nfd_env = Environment()

# Cocoa OS X builds
if target_arch is 'darwin':
    nfd_files.append('nfd_cocoa.m')
    nfd_env.Append( CC='clang -fcolor-diagnostics' )

# Linux GTK+ 3 builds
elif target_arch is 'posix':
    nfd_files.append('nfd_gtk.c')
    nfd_env.ParseConfig( 'pkg-config --cflags gtk+-3.0' )


if debug:
    nfd_env.Append( CFLAGS='-g' )

nfd_env.Append( CPPPATH=['.','./include'] )
nfd_env.Append( CFLAGS=['-Wall', '-pedantic'] )
nfd_env.StaticLibrary( 'nfd', nfd_files )
